(this.webpackJsonppurchase_order=this.webpackJsonppurchase_order||[]).push([[0],{16:function(e,r,t){},19:function(e,r,t){},20:function(e,r,t){"use strict";t.r(r);var s=t(1),c=t.n(s),n=t(9),a=t.n(n),i=(t(16),t(3)),l=t.n(i),d=t(4),o=t(7),b=t(2),j=t(6),h=t(10),u=t(11),x=function(){function e(r){var t=this;Object(h.a)(this,e),this.MAX_HEIGHT_HEADER=800,this.MAX_HEIGHT=928,this.order=void 0,this.orderGroups=[],this.getTotalQty=function(){var e,r=0,s=Object(j.a)(t.order.order_lines);try{for(s.s();!(e=s.n()).done;){r+=e.value.quantity}}catch(c){s.e(c)}finally{s.f()}return r},this.order=r}return Object(u.a)(e,[{key:"getHeight",value:function(e){return 16*e+8}},{key:"getGroups",value:function(){this.orderGroups=[];var e,r=0,t=1,s=0,c={order_details:Object(b.a)(Object(b.a)({},this.order.order_details),{},{page:t,totalPages:0}),order_lines:[]},n=Object(j.a)(this.order.order_lines);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=Math.ceil(a.name.length/61),l=Math.ceil(a.cats.split(" / ")[2].length/13),d=Math.ceil(String(a.quantity).length/4),o=Math.max(i,l,d),h=Object(b.a)(Object(b.a)({},a),{},{lineHeight:o});c.order_lines.push(h),(s+=this.getHeight(o))>(0===this.orderGroups.length?this.MAX_HEIGHT_HEADER:this.MAX_HEIGHT)&&(c.order_lines.pop(),this.orderGroups.push(c),t++,r+=1,s=this.getHeight(h.lineHeight),c={order_details:Object(b.a)(Object(b.a)({},this.order.order_details),{},{page:t,totalPages:0}),order_lines:[h]})}}catch(p){n.e(p)}finally{n.f()}c.order_lines.length>0&&(this.orderGroups.push(c),r+=1);var u,x=Object(j.a)(this.orderGroups);try{for(x.s();!(u=x.n()).done;){u.value.order_details.totalPages=r}}catch(p){x.e(p)}finally{x.f()}return this.orderGroups}}]),e}(),p=t(0),m=function(e){var r=e.order_details;return Object(p.jsxs)("div",{children:["P\xe1gina ",r.page," de ",r.totalPages]})},O=function(e){var r=e.split(" ");return r.length>2?"".concat(r[0]," ").concat(r[1]):e},f=function(e){var r=e.order_details,t=e.totalQty,s=e.store;return Object(p.jsxs)("div",{className:"border-b border-black border-dashed mb-2",children:[Object(p.jsxs)("h2",{className:"text-lg font-semibold",children:[Object(p.jsx)("span",{children:r.name}),"\xa0|\xa0",Object(p.jsx)("span",{children:r.datetime})]}),1===r.page&&Object(p.jsxs)("div",{className:"uppercase",children:[Object(p.jsx)("div",{className:"w-1/2 inline-block pr-2",style:{height:"".concat(120,"px")},children:Object(p.jsx)("table",{className:"w-full",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"text-right font-semibold",children:"Digitador: "}),Object(p.jsx)("td",{children:O(r.username)})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"text-right font-semibold",children:"Almacenero(s):"}),Object(p.jsx)("td",{className:"border-b border-black"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"text-right font-semibold",children:"Inicio: "}),Object(p.jsx)("td",{children:"\xa0\xa0/\xa0\xa0/\xa0\xa0-\xa0\xa0\xa0:\xa0\xa0"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"text-right font-semibold",children:"Fin: "}),Object(p.jsx)("td",{children:"\xa0\xa0/\xa0\xa0/\xa0\xa0-\xa0\xa0\xa0:\xa0\xa0"})]})]})})}),Object(p.jsx)("div",{className:"w-1/2 inline-block pl-2",style:{height:"".concat(120,"px")},children:Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsx)("tr",{children:Object(p.jsx)("td",{colSpan:2,className:"leading-[14px] break-all",children:r.partner_name})}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w-[150px] text-right font-semibold",children:"Factura:"}),Object(p.jsx)("td",{children:r.partner_ref})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w-[150px] text-right font-semibold",children:"Cantidad Total:"}),Object(p.jsx)("td",{children:t})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w-[150px] text-right font-semibold",children:"Destino:"}),Object(p.jsx)("td",{children:s.name})]})]})})})]})]})},g=function(e){var r=e.order_details,t=e.order_lines;return Object(p.jsxs)("div",{className:"text-xs border-b border-black border-dashed mb-2",style:{height:"".concat(850+(1===r.page?0:125),"px")},children:[Object(p.jsxs)("div",{className:"font-semibold",children:[Object(p.jsx)("span",{className:"border-l border-t border-r border-b border-black p-1 inline-block w-[65%]",children:"DESCRIPCI\xd3N"}),Object(p.jsx)("span",{className:"border-t border-r border-b border-black p-1 inline-block w-[15%]",children:"MARCA"}),Object(p.jsx)("span",{className:"border-t border-r border-b border-black p-1 inline-block w-[5%]",children:"CNT"}),Object(p.jsx)("span",{className:"border-t border-r border-b border-black p-1 inline-block w-[calc(15%/3)]",children:"ALM"}),Object(p.jsx)("span",{className:"border-t border-r border-b border-black p-1 inline-block w-[calc(15%/3)]",children:"VAL"}),Object(p.jsx)("span",{className:"border-t border-r border-b border-black p-1 inline-block w-[calc(15%/3)]",children:"OBS"})]}),t.map((function(e,r){return Object(p.jsxs)("div",{className:"flex even:bg-gray-200",style:{height:"".concat(16*e.lineHeight+8,"px")},children:[Object(p.jsx)("div",{className:"border-l border-r border-b border-black p-1 inline-flex items-center break-all w-[65%]",children:Object(p.jsx)("span",{className:"",children:e.name})}),Object(p.jsx)("div",{className:"border-r border-b border-black p-1 inline-flex items-center break-all w-[15%]",children:Object(p.jsx)("span",{className:"",children:e.cats.split(" / ")[2]})}),Object(p.jsx)("div",{className:"border-r border-b border-black p-1 inline-flex items-center w-[5%]",children:Object(p.jsx)("span",{className:"",children:e.quantity})}),Object(p.jsx)("div",{className:"border-r border-b border-black p-1 inline-flex items-center justify-center w-[calc(15%/3)]"}),Object(p.jsx)("div",{className:"border-r border-b border-black p-1 inline-flex items-center justify-center w-[calc(15%/3)]"}),Object(p.jsx)("div",{className:"border-r border-b border-black p-1 inline-flex items-center justify-center w-[calc(15%/3)]"})]},r)}))]})},v=(t(19),function(e){var r=e.orderGroup,t=e.totalQty,s=e.store;return Object(p.jsx)("div",{className:"font-mono text-sm",children:Object(p.jsxs)("div",{className:"sheet-page w-[210mm] h-[297mm] my-[10mm] mx-auto py-8 px-12 border border-black bg-white",children:[Object(p.jsx)(f,{order_details:r.order_details,totalQty:t,store:s}),Object(p.jsx)(g,{order_details:r.order_details,order_lines:r.order_lines}),Object(p.jsx)(m,{order_details:r.order_details})]})})}),N=[{id:1,name:"abtao"},{id:2,name:"san martin"},{id:3,name:"tingo maria"}],k=function(e){var r=e.store,t=e.updateStore;return Object(p.jsx)("div",{className:"no-print px-12 mx-8 mt-2",children:Object(p.jsxs)("div",{className:"font-mono",children:[Object(p.jsx)("label",{children:"DESTINO: "}),Object(p.jsx)("select",{className:"uppercase",value:r.id,onChange:t,children:N.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.name},e.id)}))})]})})},_=function(){var e=Object(d.a)(l.a.mark((function e(r){var t,s,c,n,a,i,d,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.get("model"),s=r.get("id"),c="".concat(r.get("api"),"?model=").concat(t,"&id=").concat(s),n={headers:{"x-api-key":r.get("key")}},t&&s&&c&&n){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,fetch(c,n);case 9:return e.next=11,e.sent.json();case 11:if(200!==(a=e.sent).statusCode){e.next=17;break}return i=a.order_details,d=a.order_lines,o={order_details:i,order_lines:d},e.abrupt("return",o);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(r){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.useState)(N[0]),r=Object(o.a)(e,2),t=r[0],c=r[1],n=Object(s.useState)([]),a=Object(o.a)(n,2),i=a[0],b=a[1],j=Object(s.useState)(0),h=Object(o.a)(j,2),u=h[0],m=h[1],O=function(){var e=Object(d.a)(l.a.mark((function e(){var r,t,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams(window.location.search),e.next=3,_(r);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:document.title=t.order_details.name,s=new x(t),b(s.getGroups()),m(s.getTotalQty);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){O()}),[]);return Object(p.jsxs)("div",{children:[Object(p.jsx)(k,{store:t,updateStore:function(e){var r=Number(e.target.value),t=N.find((function(e){return e.id===r}));t&&c(t)}}),i.map((function(e,r){return Object(p.jsx)(v,{orderGroup:e,totalQty:u,store:t},r)}))]})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,21)).then((function(r){var t=r.getCLS,s=r.getFID,c=r.getFCP,n=r.getLCP,a=r.getTTFB;t(e),s(e),c(e),n(e),a(e)}))};a.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(y,{})}),document.getElementById("root")),w()}},[[20,1,2]]]);
//# sourceMappingURL=main.1e13f8c1.chunk.js.map